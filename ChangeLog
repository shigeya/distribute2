1999-05-07  Shigeya Suzuki  <shigeya@malor.foretune.co.jp>

	* message.tmpl: message modified a bit.

	* distribute.c (send_message): originator address should be used
	  to check message language type.

1999-05-06  Shigeya Suzuki  <shigeya@malor.foretune.co.jp>

	* recipfile.c (parserecipfile): added some sanity check.

	* distribute.c (prepare_arguments): cc:Mail reject pattern
	  added. (from ume@bisd.hitachi.co.jp, via itojun@itojun.org).
	  (parse_options): strspend bug fix from Hidekazu Nakamura
	  <u90121@uis-inf.co.jp>. (parse_options): option parsing bug fix
	  and little enhancement.
	  (cleanheader): bracket bug fix from hchikara@nifs.ac.jp

Thu Nov 20 15:10:27 1997  Shigeya Suzuki  <shigeya@werdna.foretune.co.jp>

	* distribute.c (prepare_arguments): now using normalizeaddr and
	  not using checkhdr. (shigeya)

Fri Oct  3 11:15:16 1997  Shigeya Suzuki  <shigeya@werdna.foretune.co.jp>

	* patchlevel 24e

	* recipfile.c (normalizeaddr): strip trailing blank. support
	  (<..>) style comment.

Thu Oct  2 11:24:54 1997  Shigeya Suzuki  <shigeya@werdna.foretune.co.jp>

	* patchlevel 23e

	* distribute.c (prepare_arguments): missing spaces between
	  arguments fixed (by shin@ryukyu.ad.jp). 'wasadmin' improvement
	  (by baba@kusastro.kyoto-u.ac.jp)

Wed Oct  1 14:27:08 1997  Shigeya Suzuki  <shigeya@fuzzball.foretune.co.jp>

	* distribute.c: AcceptAddr bug fix, bouncing general clean-up
	  courtesy of Aplix corp (thanks ryu) Now introduced some new
	  words for -s option bouncing.

Fri Sep 12 11:43:06 1997  Shigeya Suzuki  <shigeya@werdna.foretune.co.jp>

	* -M behavior fix (from toshi@isl.rdc.toshiba.co.jp)

	* euc_to_iso2022jp: strip 8th bit.

	* Reject specific address patch from y-koga@ccs.mt.nec.co.jp

	* X-Reference patch from hiro@is.s.u-tokyo.ac.jp

	* Makefile: Solaris patch

Mon Jan  6 17:45:17 1997  Shigeya Suzuki  <shigeya@werdna.foretune.co.jp>

	* distribute.c: archive/distribute index 書き込みの順番の問題解決。

	* distribute.c, Makefile, message.tmpl: cc:Mail のバカ bounce 対策
	  ハック (<pdp@cyber-fleet.com>)
	* distribute.c: subject paren balancing bug (<matsui@iij-mc.co.jp>)

	* tmpl2c now correctly run on perl5.

Fri Aug  5 21:01:11 1994  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* patchlevel=19 FIX

	* Bug fix on compiled without -DISSUE/-DSUBJALIAS, non-sequence no.
	  <hiro@is.s.u-tokyo.ac.jp>

	* Fix on archive.c <caoru@sgi.co.jp> really big bug!

	* EWS4800 support patch <y-koga@ccs.mt.nec.co.jp>

Sat Feb 19 00:48:34 1994  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* memory.h プロトタイプ変更。str{sp}append を追加

	* header.c: malloc -> xmalloc

	* -m オプションを複数指定出来るように変更。

	* strspappend/strappend を追加。

Mon Feb 14 14:59:46 1994  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* patchlevel=18 FIX

	* -O があっても動くのを確認したので ドキュメントをそれに合わせて修
	  正。

	* jcode.pl を tmpl2c.pl に含めた。

	* write_index() で、ローカル変数のつかい方が正しくなかったので修正
	  した。これで、SunOS で -O オプションつきでも平気なはずである。

	* reject したときにも historyを書きにいっていたので、それをやめる
	  ようにした。

Sun Feb 13 21:33:52 1994  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* patchlevel=17 FIX

	* 一部のテスト関連のファイルを削除

	* parserecipfile.c -> recipfile.c, parserecipfile.h -> recipfile.h

	* MSCオプションつきでもちゃんとアーカイブ出来るようにする。

	* adddefaultpath にオプション追加。リスト名をlower caseに。

	* majordomo オプション付きのときに、recipient filenameのメーリング
	  リスト名部分のみ lowercase にコンバートするようにした。

	* INSTALL.JP追加

Thu Feb 10 14:39:46 1994  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* patchlevel=16 FIX

	* lint 対応

Tue Feb  1 13:05:49 1994  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* patchlevel=15 FIX

	* bugfix: forget to return headc in parse_and_clean_header

	* Sunでコンパイルできなかったので、その部分を修正。

	* patchlevel=14 FIX

	* archive で -N をオプションとして取れなかったのを修正。

	* add x-sequence の追加 (-q) 

	* terse optionの追加 (-t) -> subject に mailing list nameを入れな
	  くなる。

	* patchlevel=13 FIX

	* checksum 計算のバグを修正

	* History のフォーマットの変更(sumを10桁に)

	* Write Index option (-x) を追加

	* pathutil.[ch] history.[ch] の追加

	* support.c -> strlib.c/strlib.h

	* -Z オプションで、インデックスファイルのファイル名を指定できるよ
	  うにした(default: INDEX)

	* -Y オプションで、アーカイブディレクトリのベースを指定するように
	  した。

	* Archive 機能をほぼ実現。

Sun Jan 23 21:09:27 1994  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* Archive 機能の一部実現。

	* memory, logging 関連の関数を別ファイルにした。

Wed Dec 22 01:11:18 1993  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* Change from masa-k for NEWSOS support

	* MSC オプションで一部間違いがあったので fix した。

Tue Dec 21 06:31:46 1993  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* patchlevel=12 FIX

	* Makefileのバグフィックス(最近足したソースがHDRS/SRCSに反映されて
	  いなかった)

	* メッセージの %M を maintainer@host に変更した。さらに、
	  originator に返送されるときに、maintainerにCc:されるように修正。

	* ログに出力されるメッセージを少し増やした。

	* SunOS4.1.3 でコンパイルするのに少々問題あったので修正

	* maintainer のドメイン名追加処理を修正

	* invalid message の送り先が originator だったので、maintainerに変
	  更

	* -n オプションを追加。 -n news@foretune.co.jp の形式で、
	  originator となるアドレスを指定できる。指定したアドレスと異なる
	  場合は、maintainer向けにメールが送られる。このオプションを指定し、
	  かつ、アドレスがマッチした場合、先行するメールヘッダが削除された
	  うえで、通常の処理が続行する。

	* MAXHEADERLINEのかわりに 100 を使っているところがあるので修正。

	* patchlevel=11 FIX

	* Return-Path:など削除すべきヘッダが複数あった時にちゃんと削除され
	  ていなかった。

	* ソースを ちょっとおそうじした。

	* badheader/administrative で JP conversion をいれてなかったのでい
	  れた。

	* install時にinstall -c を使うように変更(こばちゃんの指摘)

Mon Dec 20 00:24:16 1993  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* patchlevel=10 FIX

	* parserecipfileから行の正規化ルーチンを外に取り出し、単独利用可能
	  とした。

	* ls_appendcharの追加

	* parserecipfileの引数追加(エラー時処理方法指定)

	* 各種エラーリプライの作成を行なうパッケージを追加。originatorによ
	  りメッセージの種類を変更可能とした。(日本語／英語など)

	* Accept fileが指定されている場合、From/Senderなどから分かる
	  originator をみて、acceptfileに指定されていないユーザからのメッ
	  セージをリジェクトするようにした。

	* -A option を -X に変更。 -A で accept file の指定を可能に。

Sun Dec 19 10:35:58 1993  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* patchlevel=9 FIX

	* main を縮小して、機能分化した(まだ、見通しが悪いけど、前よりマシ
	  か)

	* incorporate demizu error patch

Tue Nov  2 15:46:39 1993  Shigeya Suzuki  (shigeya at hook.foretune.co.jp)

	* Patchlevel=8 FIX

	* Small bug fix

	* Introduced sano tee style archive patch. also includes patch for
	  recipient file parser.

	* BSD/386 support included

Sun Oct 17 15:20:33 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* Patchlevel=7 FIX

Thu Sep  2 11:25:38 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* -o フラグを追加。-o が指定されているか、majordomoの時は sender 
	  は LIST-request ではなく owner-LIST になる。

Wed Sep  1 16:25:37 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* errorが起こった時は、issue番号を変更しないで、0として処理する。

	* issuenumを定義しないときのサブジェクト定義のバグを修正。

	* maintainerの定義: -f senderがあるなら、そこへ。そうでない場合は、
	  majordomoの場合は -owner, distributeの場合は -request。

	* chkhdr/badhdrに関する部分を変更、エラーメールの差戻し先を変更し、
	  かつ、majordomoするときとそうでないときを分けた。(maintainerへ)

	* config.h を追加

Mon Aug  9 13:37:55 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* fix from nao@jaist.ac.jp, use strncasecmp instead of strncmp.

Sat Aug  7 15:46:29 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* Patchlevel=6 FIX

	* Majordomo を使う場合に、group id の関係で recipient file を分け
	  る必要があったので、-j フラグによって、別ディレクトリを指定出来
	  るようにした。-j は -M や -N より前になければならない。

Sun Jul 25 16:02:10 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* Recipient file のパーシングをもうすこし賢く行うようにした。

Wed Jun 16 13:40:26 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* AddAliasIDToSubject/AddAliasIDToHeader各関数を作成し、mainからそ
	  ちらへ関数を移した。更にメンテしやすいように少々修正。

	* jun@ami.nakahara.fujitsu.co.jp さんのMSCスタイルヘッダのパッチを
	  マージ。

Mon May 31 15:44:07 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* Patchlevel=5 FIX

	* main ルーチンを小さくする作業を始めた

	* 単にexitするのではなく、syslog への書き込みを行なうようにした。

Fri May 28 11:21:28 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* Added: ADDVERSION, to add X-Distribute header

	* fix by minmin@astec, not touch continuation line header.

	* fix by miyoshi@iij, several sprintf parameter incorrect, and
	  compile option display incorrect.

Fri May 21 10:28:39 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* recipient が多い場合、可変長文字列のreallocにバグがいる関係で、
	  正しく動作していなかった。可変長文字列のルーチンを切り分けた上で、
	  テストプログラムを入れて動作チェックするようにした。

Wed Apr 21 02:23:45 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* install 先を /usr/bin, /usr/manにデフォルト変更

	* install の mode などを変更。suidするのは危険なのでやめた。

Tue Apr 20 18:24:52 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* Make dependency を正しくした。

	* MANIFESTをcvs的に追加

	* -V option 追加（バージョン表示と、各種デフォルト表示）

	* DEF_ALIAS_CHAR_OPTION を導入。OPEN/CLOSE別々ではなく、option形式
	  で設定可能に。OPEN/CLOSEによる設定は廃止。

	* DEF_DOMAINNAME を再導入

	* patchlevel.h を追加

	* Makefile を変更 DEF_DOMAINNAMEに関する記述を削除。install時の
	  owner group をmakefileで指定。mode=4755

	* recipfile が開けない時のエラーメッセージが間違っていたので修正。

	* Reply-Toのデフォルトアクションを変更。Reply-Toがある場合は、それ
	  を尊重するようにした。ただし、-i オプションをつけると、強制的に
	  Reply-toを書き換える（backward compatible option）

Tue Apr 19 12:03:07 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* WHITESPACE SPACE という行がヘッダの終りと解釈されていたので、そ
	  の行を無視するようにした。さらに、FormFeedを解釈するのはお節介な
	  ので、無視。

Mon Apr 12 11:42:18 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* -B オプションによる subject alias の括弧の変更機能を追加。

	* "NEWS" を追加した

	* -M/-N option の追加

	* MakefileでOptionsの扱いが間違っていたので修正。

Wed Mar 31 17:06:44 1993  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* Added README.FIRST

	* Distribution に Makefile.pmake を追加 (for BSD/386)

	* 高田さんからのフィードバックを元にリリースキット作成

Mon Dec 28 11:56:44 JST 1992  Hiroaki Takada (hiro@is.s.u-tokyo.ac.jp)

	* cmdbuf の長さを 10KByte にする。たぶん越えないとは思うが、オー
	バーのチェックはしていないので、注意が必要。

Thu Dec 17 17:23:05 JST 1992  Hiroaki Takada (hiro@is.s.u-tokyo.ac.jp)

	* -r オプションが無い場合は、Reply-To: を元のメイルのままにす
	る。独自の Reply-To: をつける方法は、メイリングリストにはいっ
	ていない人からメイルが来る場合には、単にリプライした場合にメイ
	ルの差し出し人に送られないため、問題があると思われる。

	* Errors-To: フィールドに入れるアドレスを、list-name-request 
	にする (マニュアルにあわせた)。

	* 'L' オプションを追加。-L <ファイル名> で、<ファイル名> で指
	定されたファイルに書かれている内容を、メイリングリストの宛先と
	して扱う。これにより、SMTP の expn を使っても、メイリングリス
	トの内容を見えなくすることができる。

	* issuefile がアクセスできなかった時に、発信者にエラーメイルが
	返るように改造。また、ヘッダがおかしい場合や、-s オプションが
	ついていて管理目的メイルと思われる場合には、シーケンス番号を振
	らないようにする。

	* -DISSUE -DSUBJALIAS でない時に Subject がなくなるバグをフィッ
	クス。

	* 最初にあるコメントに "This program should be setuid to one
	of sendmail's trusted users" とあったが、-I オプションをサポー
	トすると、これは危ない。

	* マニュアルを修正。

Thu Oct  8 13:20:48 1992  Shigeya Suzuki  (shigeya at dink.foretune.co.jp)

	* man page update

	* Changed Makefile to include changes

	* Changed usage message reflect the change

	* Changed option 'v' to 'I' (but 'v' remain same effect for
	  compatibility)

	* Added SUBJALIAS and ISSUE configuration parameter

	* Added Locking for sequence file

ChangeLog,v 1.35 1994/08/05 12:04:43 shigeya Exp
